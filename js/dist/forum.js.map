{"version":3,"sources":["webpack://@the-turk/flarum-mathren/webpack/bootstrap","webpack://@the-turk/flarum-mathren/external \"flarum.core.compat['app']\"","webpack://@the-turk/flarum-mathren/external \"flarum.core.compat['extend']\"","webpack://@the-turk/flarum-mathren/./node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/getPrototypeOf.js","webpack://@the-turk/flarum-mathren/external \"flarum.core.compat['components/Button']\"","webpack://@the-turk/flarum-mathren/./node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@the-turk/flarum-mathren/external \"flarum.core.compat['Component']\"","webpack://@the-turk/flarum-mathren/./node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/typeof.js","webpack://@the-turk/flarum-mathren/./node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack://@the-turk/flarum-mathren/./node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/assertThisInitialized.js","webpack://@the-turk/flarum-mathren/external \"flarum.core.compat['components/CommentPost']\"","webpack://@the-turk/flarum-mathren/external \"flarum.core.compat['components/TextEditor']\"","webpack://@the-turk/flarum-mathren/external \"flarum.core.compat['components/Dropdown']\"","webpack://@the-turk/flarum-mathren/external \"flarum.core.compat['utils/ItemList']\"","webpack://@the-turk/flarum-mathren/external \"flarum.core.compat['helpers/icon']\"","webpack://@the-turk/flarum-mathren/./node_modules/_@babel_runtime@7.9.2@@babel/runtime/helpers/esm/extends.js","webpack://@the-turk/flarum-mathren/./src/forum/util/insertText.js","webpack://@the-turk/flarum-mathren/./src/forum/util/styles.js","webpack://@the-turk/flarum-mathren/./src/forum/util/apply.js","webpack://@the-turk/flarum-mathren/./src/forum/components/MathDropdown.js","webpack://@the-turk/flarum-mathren/./src/forum/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","flarum","core","compat","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","constructor","_typeof","obj","iterator","_possibleConstructorReturn","self","ReferenceError","_extends","assign","target","arguments","length","source","apply","this","canInsertText","isMultipleLines","string","trim","split","repeat","Array","join","wordSelectionStart","text","index","match","wordSelectionEnd","multiline","breakpoint","newlinesToSurroundSelectedText","textarea","newlinesToAppend","newlinesToPrepend","beforeSelection","slice","selectionStart","afterSelection","selectionEnd","breaksBefore","breaksAfter","newlinesBeforeSelection","newlinesAfterSelection","blockStyle","arg","prefix","suffix","blockPrefix","blockSuffix","replaceNext","prefixSpace","scanFor","surroundWithNewlines","originalSelectionStart","originalSelectionEnd","selectedText","prefixToUse","suffixToUse","undefined","expandedSelectionStart","expandedSelectionEnd","beginsWithPrefix","endsWithSuffix","expandSelectedText","hasReplaceNext","indexOf","ref","startsWith","endsWith","replacementText","position","Math","max","min","replace","whitespaceEdges","trimFirst","leadingWhitespace","trailingWhitespace","styleSelectedText","styleArgs","result","orderedList","startOfLine","endOfLine","orderedListRegex","noInitialSelection","textToUnstyle","lines","linesBefore","linesToUnstyle","every","line","test","map","lengthDiff","len","results","push","multilineStyle","before","after","contentEditable","document","execCommand","error","e","event","createEvent","initEvent","dispatchEvent","setSelectionRange","insertText","textEditor","stylesToApply","style","element","textareaId","field","querySelector","focus","init","props","localePrefix","mainBlockDelimiter","app","forum","attribute","mainInlineDelimiter","view","Dropdown","component","className","buttonClassName","label","icon","children","items","toArray","ItemList","add","Button","translator","trans","onclick","leftDelim","rightDelim","Component","initializers","extend","CommentPost","renderMathInElement","$","JSON","parse","override","s9e","TextFormatter","original","TextEditor","mathButton","MathDropdown"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['extend'];","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","module.exports = flarum.core.compat['components/Button'];","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","module.exports = flarum.core.compat['Component'];","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/TextEditor'];","module.exports = flarum.core.compat['components/Dropdown'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['helpers/icon'];","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","/*\n * Original Copyright GitHub, Inc. Licensed under the MIT License.\n * See license text at https://github.com/github/markdown-toolbar-element/blob/master/LICENSE.\n */\n\nexport let canInsertText = null;\n\nexport default (textarea, { text, selectionStart, selectionEnd }) => {\n  const originalSelectionStart = textarea.selectionStart;\n  const before = textarea.value.slice(0, originalSelectionStart);\n  const after = textarea.value.slice(textarea.selectionEnd);\n\n  if (canInsertText === null || canInsertText === true) {\n    textarea.contentEditable = 'true';\n    try {\n      canInsertText = document.execCommand('insertText', false, text);\n    }\n    catch (error) {\n      canInsertText = false;\n    }\n    textarea.contentEditable = 'false';\n  }\n  if (canInsertText && !textarea.value.slice(0, textarea.selectionStart).endsWith(text)) {\n    canInsertText = false;\n  }\n  if (!canInsertText) {\n    try {\n      document.execCommand('ms-beginUndoUnit');\n    }\n    catch (e) {\n      // Do nothing.\n    }\n    textarea.value = before + text + after;\n    try {\n      document.execCommand('ms-endUndoUnit');\n    }\n    catch (e) {\n      // Do nothing.\n    }\n\n    // fire custom event, works on IE\n    const event = document.createEvent('Event');\n\n    event.initEvent('input', true, true);\n\n    textarea.dispatchEvent(event);\n  }\n  if (selectionStart != null && selectionEnd != null) {\n    textarea.setSelectionRange(selectionStart, selectionEnd);\n  }\n  else {\n    textarea.setSelectionRange(originalSelectionStart, textarea.selectionEnd);\n  }\n};\n","/*\n * Original Copyright GitHub, Inc. Licensed under the MIT License.\n * See license text at https://github.com/github/markdown-toolbar-element/blob/master/LICENSE.\n */\n\nexport function isMultipleLines(string) {\n  return string.trim().split('\\n').length > 1;\n}\n\nexport function repeat(string, n) {\n  return Array(n + 1).join(string);\n}\n\nexport function wordSelectionStart(text, i) {\n  let index = i;\n\n  while (text[index] && text[index - 1] != null && !text[index - 1].match(/\\s/)) {\n    index--;\n  }\n\n  return index;\n}\n\nexport function wordSelectionEnd(text, i, multiline) {\n  let index = i;\n  const breakpoint = multiline ? /\\n/ : /\\s/;\n\n  while (text[index] && !text[index].match(breakpoint)) {\n    index++;\n  }\n\n  return index;\n}\n\nexport function expandSelectedText(textarea, prefixToUse, suffixToUse) {\n  let multiline = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n\n  if (textarea.selectionStart === textarea.selectionEnd) {\n    textarea.selectionStart = wordSelectionStart(textarea.value, textarea.selectionStart);\n    textarea.selectionEnd = wordSelectionEnd(textarea.value, textarea.selectionEnd, multiline);\n  } else {\n    const expandedSelectionStart = textarea.selectionStart - prefixToUse.length;\n    const expandedSelectionEnd = textarea.selectionEnd + suffixToUse.length;\n    const beginsWithPrefix = textarea.value.slice(expandedSelectionStart, textarea.selectionStart) === prefixToUse;\n    const endsWithSuffix = textarea.value.slice(textarea.selectionEnd, expandedSelectionEnd) === suffixToUse;\n\n    if (beginsWithPrefix && endsWithSuffix) {\n      textarea.selectionStart = expandedSelectionStart;\n      textarea.selectionEnd = expandedSelectionEnd;\n    }\n  }\n\n  return textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n}\n\nexport function newlinesToSurroundSelectedText(textarea) {\n  const beforeSelection = textarea.value.slice(0, textarea.selectionStart);\n  const afterSelection = textarea.value.slice(textarea.selectionEnd);\n  const breaksBefore = beforeSelection.match(/\\n*$/);\n  const breaksAfter = afterSelection.match(/^\\n*/);\n  const newlinesBeforeSelection = breaksBefore ? breaksBefore[0].length : 0;\n  const newlinesAfterSelection = breaksAfter ? breaksAfter[0].length : 0;\n  let newlinesToAppend;\n  let newlinesToPrepend;\n\n  if (beforeSelection.match(/\\S/) && newlinesBeforeSelection < 2) {\n    newlinesToAppend = repeat('\\n', 2 - newlinesBeforeSelection);\n  }\n\n  if (afterSelection.match(/\\S/) && newlinesAfterSelection < 2) {\n    newlinesToPrepend = repeat('\\n', 2 - newlinesAfterSelection);\n  }\n\n  if (newlinesToAppend == null) {\n    newlinesToAppend = '';\n  }\n\n  if (newlinesToPrepend == null) {\n    newlinesToPrepend = '';\n  }\n\n  return {\n    newlinesToAppend,\n    newlinesToPrepend\n  };\n}\n\nexport const blockStyle = (textarea, arg) => {\n  let newlinesToAppend;\n  let newlinesToPrepend;\n  const { prefix, suffix, blockPrefix, blockSuffix, replaceNext, prefixSpace, scanFor, surroundWithNewlines } = arg;\n  const originalSelectionStart = textarea.selectionStart;\n  const originalSelectionEnd = textarea.selectionEnd;\n  let selectedText = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  let prefixToUse = isMultipleLines(selectedText) && blockPrefix.length > 0 ? `${blockPrefix}\\n` : prefix;\n  let suffixToUse = isMultipleLines(selectedText) && blockSuffix.length > 0 ? `\\n${blockSuffix}` : suffix;\n\n  if (prefixSpace) {\n    const beforeSelection = textarea.value[textarea.selectionStart - 1];\n    if (textarea.selectionStart !== 0 && beforeSelection != null && !beforeSelection.match(/\\s/)) {\n      prefixToUse = ` ${prefixToUse}`;\n    }\n  }\n\n  selectedText = expandSelectedText(textarea, prefixToUse, suffixToUse, arg.multiline);\n  let selectionStart = textarea.selectionStart;\n  let selectionEnd = textarea.selectionEnd;\n  const hasReplaceNext = replaceNext.length > 0 && suffixToUse.indexOf(replaceNext) > -1 && selectedText.length > 0;\n\n  if (surroundWithNewlines) {\n    const ref = newlinesToSurroundSelectedText(textarea);\n    newlinesToAppend = ref.newlinesToAppend;\n    newlinesToPrepend = ref.newlinesToPrepend;\n    prefixToUse = newlinesToAppend + prefix;\n    suffixToUse += newlinesToPrepend;\n  }\n\n  if (selectedText.startsWith(prefixToUse) && selectedText.endsWith(suffixToUse)) {\n    const replacementText = selectedText.slice(prefixToUse.length, selectedText.length - suffixToUse.length);\n    if (originalSelectionStart === originalSelectionEnd) {\n      let position = originalSelectionStart - prefixToUse.length;\n      position = Math.max(position, selectionStart);\n      position = Math.min(position, selectionStart + replacementText.length);\n      selectionStart = selectionEnd = position;\n    }\n    else {\n      selectionEnd = selectionStart + replacementText.length;\n    }\n    return { text: replacementText, selectionStart, selectionEnd };\n  }\n  else if (!hasReplaceNext) {\n    let replacementText = prefixToUse + selectedText + suffixToUse;\n    selectionStart = originalSelectionStart + prefixToUse.length;\n    selectionEnd = originalSelectionEnd + prefixToUse.length;\n    const whitespaceEdges = selectedText.match(/^\\s*|\\s*$/g);\n    if (arg.trimFirst && whitespaceEdges) {\n      const leadingWhitespace = whitespaceEdges[0] || '';\n      const trailingWhitespace = whitespaceEdges[1] || '';\n      replacementText = leadingWhitespace + prefixToUse + selectedText.trim() + suffixToUse + trailingWhitespace;\n      selectionStart += leadingWhitespace.length;\n      selectionEnd -= trailingWhitespace.length;\n    }\n    return { text: replacementText, selectionStart, selectionEnd };\n  }\n  else if (scanFor.length > 0 && selectedText.match(scanFor)) {\n    suffixToUse = suffixToUse.replace(replaceNext, selectedText);\n    const replacementText = prefixToUse + suffixToUse;\n    selectionStart = selectionEnd = selectionStart + prefixToUse.length;\n    return { text: replacementText, selectionStart, selectionEnd };\n  }\n  else {\n    const replacementText = prefixToUse + selectedText + suffixToUse;\n    selectionStart = selectionStart + prefixToUse.length + selectedText.length + suffixToUse.indexOf(replaceNext);\n    selectionEnd = selectionStart + replaceNext.length;\n    return { text: replacementText, selectionStart, selectionEnd };\n  }\n}\n\nexport const multilineStyle = (textarea, arg) => {\n  const { prefix, suffix, surroundWithNewlines } = arg;\n  let text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  let selectionStart = textarea.selectionStart;\n  let selectionEnd = textarea.selectionEnd;\n  const lines = text.split('\\n');\n  const undoStyle = lines.every(line => line.startsWith(prefix) && line.endsWith(suffix));\n  if (undoStyle) {\n    text = lines.map(line => line.slice(prefix.length, line.length - suffix.length)).join('\\n');\n    selectionEnd = selectionStart + text.length;\n  }\n  else {\n    text = lines.map(line => prefix + line + suffix).join('\\n');\n    if (surroundWithNewlines) {\n      const { newlinesToAppend, newlinesToPrepend } = newlinesToSurroundSelectedText(textarea);\n      selectionStart += newlinesToAppend.length;\n      selectionEnd = selectionStart + text.length;\n      text = newlinesToAppend + text + newlinesToPrepend;\n    }\n  }\n  return { text, selectionStart, selectionEnd };\n}\n\nexport const orderedList = (textarea) => {\n  const orderedListRegex = /^\\d+\\.\\s+/;\n  const noInitialSelection = textarea.selectionStart === textarea.selectionEnd;\n  let selectionEnd;\n  let selectionStart;\n  let text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  let textToUnstyle = text;\n  let lines = text.split('\\n');\n  let startOfLine, endOfLine;\n  if (noInitialSelection) {\n    const linesBefore = textarea.value.slice(0, textarea.selectionStart).split(/\\n/);\n    startOfLine = textarea.selectionStart - linesBefore[linesBefore.length - 1].length;\n    endOfLine = wordSelectionEnd(textarea.value, textarea.selectionStart, true);\n    textToUnstyle = textarea.value.slice(startOfLine, endOfLine);\n  }\n  const linesToUnstyle = textToUnstyle.split('\\n');\n  const undoStyling = linesToUnstyle.every(line => orderedListRegex.test(line));\n  if (undoStyling) {\n    lines = linesToUnstyle.map(line => line.replace(orderedListRegex, ''));\n    text = lines.join('\\n');\n    if (noInitialSelection && startOfLine && endOfLine) {\n      const lengthDiff = linesToUnstyle[0].length - lines[0].length;\n      selectionStart = selectionEnd = textarea.selectionStart - lengthDiff;\n      textarea.selectionStart = startOfLine;\n      textarea.selectionEnd = endOfLine;\n    }\n  }\n  else {\n    lines = (function () {\n      let i;\n      let len;\n      let index;\n      const results = [];\n      for (index = i = 0, len = lines.length; i < len; index = ++i) {\n        const line = lines[index];\n        results.push(`${index + 1}. ${line}`);\n      }\n      return results;\n    })();\n    text = lines.join('\\n');\n    const { newlinesToAppend, newlinesToPrepend } = newlinesToSurroundSelectedText(textarea);\n    selectionStart = textarea.selectionStart + newlinesToAppend.length;\n    selectionEnd = selectionStart + text.length;\n    if (noInitialSelection)\n      selectionStart = selectionEnd;\n    text = newlinesToAppend + text + newlinesToPrepend;\n  }\n  return { text, selectionStart, selectionEnd };\n}\n","/*\n * Original Copyright GitHub, Inc. Licensed under the MIT License.\n * See license text at https://github.com/github/markdown-toolbar-element/blob/master/LICENSE.\n */\n\nimport insertText from './insertText';\nimport { blockStyle, isMultipleLines, multilineStyle, orderedList } from './styles';\n\nexport const styleSelectedText = (textarea, styleArgs) => {\n  const text = textarea.value.slice(textarea.selectionStart, textarea.selectionEnd);\n  let result;\n  if (styleArgs.orderedList) {\n    result = orderedList(textarea);\n  }\n  else if (styleArgs.multiline && isMultipleLines(text)) {\n    result = multilineStyle(textarea, styleArgs);\n  }\n  else {\n    result = blockStyle(textarea, styleArgs);\n  }\n\n  insertText(textarea, result);\n};\n\n// See: https://github.com/flarum/markdown/blob/d9257d748c8ac4e45d831047a499b14c1fee0c9f/js/src/forum/util/apply.js\nexport default (textEditor, stylesToApply) => {\n  const defaults = {\n    prefix: '',\n    suffix: '',\n    blockPrefix: '',\n    blockSuffix: '',\n    multiline: false,\n    replaceNext: '',\n    prefixSpace: false,\n    scanFor: '',\n    surroundWithNewlines: false,\n    orderedList: false,\n    trimFirst: false\n  };\n\n  const style = Object.assign({}, defaults, stylesToApply);\n\n  const { element, textareaId } = textEditor;\n\n  const field = element.querySelector(`#${textareaId}`);\n\n  if (field) {\n    field.focus();\n    styleSelectedText(field, style);\n  }\n}\n","import app from 'flarum/app';\nimport Component from 'flarum/Component';\nimport Dropdown from 'flarum/components/Dropdown';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\nimport icon from 'flarum/helpers/icon';\nimport apply from '../util/apply';\n\nexport default class extends Component {\n  init() {\n    this.textEditor = this.props.textEditor;\n\n    // translation prefix\n    this.localePrefix = 'the-turk-mathren.forum.textEditor.';\n\n    // main BBCode delimiters\n    this.mainBlockDelimiter = app.forum.attribute('mathRenMainBlockDelimiter');\n    this.mainInlineDelimiter = app.forum.attribute('mathRenMainInlineDelimiter');\n  }\n\n  view() {\n    return Dropdown.component({\n      className: 'MathRenDropdown',\n      buttonClassName: 'Button Button--flat',\n      label: icon('fas fa-square-root-alt'),\n      children: this.items().toArray()\n    });\n  }\n\n  /**\n   * Build an item list for the contents of the dropdown menu.\n   *\n   * @return {ItemList}\n   */\n  items() {\n    const items = new ItemList();\n\n    items.add('mathBlock', Button.component({\n        icon: 'fas fa-vector-square',\n        children: app.translator.trans(this.localePrefix + 'blockExpression'),\n        onclick: () => {\n          // opening tag (left delimiter)\n          const leftDelim = this.mainBlockDelimiter['left'];\n          // closing tag (right delimiter)\n          const rightDelim = this.mainBlockDelimiter['right'];\n\n          apply(this.textEditor, {\n            prefix: leftDelim,\n            suffix: rightDelim,\n            multiline: true,\n          });\n        },\n      }),\n      50\n    );\n\n    items.add('mathInline', Button.component({\n        icon: 'fas fa-grip-lines',\n        children: app.translator.trans(this.localePrefix + 'inlineExpression'),\n        onclick: () => {\n          // opening tag (left delimiter)\n          const leftDelim = this.mainInlineDelimiter['left'];\n          // closing tag (right delimiter)\n          const rightDelim = this.mainInlineDelimiter['right'];\n\n          apply(this.textEditor, {\n            prefix: leftDelim,\n            suffix: rightDelim,\n            multiline: true,\n          });\n        },\n      }),\n      0\n    );\n\n    return items;\n  }\n}\n","import {\n  extend,\n  override\n} from 'flarum/extend';\nimport app from 'flarum/app';\nimport CommentPost from 'flarum/components/CommentPost';\n// import renderMathInElement from '../../dist/auto-render.min';\nimport TextEditor from 'flarum/components/TextEditor';\nimport MathDropdown from './components/MathDropdown';\n\napp.initializers.add('the-turk-mathren', () => {\n  // on every post loading\n  extend(CommentPost.prototype, 'config', function() {\n    // run KaTeX renderer on the single post body\n    // more information on https://katex.org/docs/autorender.html\n    renderMathInElement($('.Post-body', this.element)[0], {\n      \"ignoredTags\": app.forum.attribute('mathRenIgnoredTags'),\n      \"ignoredClasses\": app.forum.attribute('mathRenIgnoredClasses'),\n      \"fleqn\": app.forum.attribute('mathRenEnableFleqn'),\n      \"leqno\": app.forum.attribute('mathRenEnableLeqno'),\n      \"output\": app.forum.attribute('mathRenOutputMode'),\n      \"throwOnError\": app.forum.attribute('mathRenEnableThrowOnError'),\n      \"errorColor\": app.forum.attribute('mathRenErrorColor'),\n      \"minRuleThickness\": app.forum.attribute('mathRenMinRuleThickness'),\n      \"maxSize\": app.forum.attribute('mathRenMaxSize'),\n      \"maxExpand\": app.forum.attribute('mathRenMaxExpand'),\n      \"macros\": JSON.parse(app.forum.attribute('mathRenMacros')),\n      \"delimiters\": app.forum.attribute('mathRenDelimiters'),\n      \"colorIsTextColor\": app.forum.attribute('mathRenEnableColorIsTextColor')\n    });\n  });\n\n  override(s9e.TextFormatter, 'preview', (original, text, element) => {\n    original(text, element);\n\n    // run KaTeX renderer on the single post body\n    // more information on https://katex.org/docs/autorender.html\n    renderMathInElement(element, {\n      \"ignoredTags\": app.forum.attribute('mathRenIgnoredTags'),\n      \"ignoredClasses\": app.forum.attribute('mathRenIgnoredClasses'),\n      \"fleqn\": app.forum.attribute('mathRenEnableFleqn'),\n      \"leqno\": app.forum.attribute('mathRenEnableLeqno'),\n      \"output\": app.forum.attribute('mathRenOutputMode'),\n      \"throwOnError\": app.forum.attribute('mathRenEnableThrowOnError'),\n      \"errorColor\": app.forum.attribute('mathRenErrorColor'),\n      \"minRuleThickness\": app.forum.attribute('mathRenMinRuleThickness'),\n      \"maxSize\": app.forum.attribute('mathRenMaxSize'),\n      \"maxExpand\": app.forum.attribute('mathRenMaxExpand'),\n      \"macros\": JSON.parse(app.forum.attribute('mathRenMacros')),\n      \"delimiters\": app.forum.attribute('mathRenDelimiters'),\n      \"colorIsTextColor\": app.forum.attribute('mathRenEnableColorIsTextColor')\n    });\n  });\n\n  // add text editor buttons\n  extend(TextEditor.prototype, 'toolbarItems', function(items) {\n    if (app.forum.attribute('mathRenEnableTextEditorButtons') === true) {\n      const mathButton = new MathDropdown({\n        textEditor: this,\n      });\n\n      items.add('the-turk-mathren', mathButton);\n    }\n  });\n});\n"],"sourceRoot":""}